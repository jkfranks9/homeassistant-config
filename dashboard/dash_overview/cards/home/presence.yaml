#=======================#
#     Presence Card     #
#=======================#

type: custom:stack-in-card
title: Presence
mode: vertical
cards:
  
  - type: 'custom:button-card'
    template: container

    custom_fields:
      buttons:
        card:
          type: grid
          columns: 4
          square: false
          cards:
      
            - type: 'custom:button-card'
              template: motion_button
              entity: binary_sensor.downstairs_motion
              name: Downstairs
  
              state_display: |
                [[[
                  if (states['sensor.downstairs_motion_device_name'].state == 'Downstairs Occupancy')
                    return 'Ecobee';
                  else if (states['sensor.downstairs_motion_device_name'].state == 'Main Floor Occupancy')
                    return 'Sensor';
                  else if (states['sensor.downstairs_motion_device_name'].state == 'Laundry Room Motion Detector Motion')
                    return 'Laundry';
                  else if (states['sensor.downstairs_motion_device_name'].state == 'Studio Motion Detector Motion')
                    return 'Studio';
                  else if (states['sensor.downstairs_motion_device_name'].state == 'Master Bath Motion Detector Motion')
                    return 'Master';
                  else if (states['sensor.downstairs_motion_device_name'].state == 'Office Human Sensor Presence')
                    return 'Office';
                ]]]
            
            - type: 'custom:button-card'
              template: motion_button
              entity: binary_sensor.upstairs_motion
              name: Upstairs
  
              state_display: |
                [[[
                  if (states['sensor.upstairs_motion_device_name'].state == 'Upstairs Occupancy')
                    return 'Ecobee';
                  else if (states['sensor.upstairs_motion_device_name'].state == 'Theater Occupancy')
                    return 'Sensor';
                ]]]
            
            - type: 'custom:button-card'
              template: sensor_button
              entity: input_select.occupied_bedrooms
              name: Occupied
  
              state_display: |
                [[[
                  if (states['input_select.occupied_bedrooms'].state == 'ChildDown')
                    return 'CDown';
                  else if (states['input_select.occupied_bedrooms'].state == 'AdultDown')
                    return 'ADown';
                  else if (states['input_select.occupied_bedrooms'].state == 'ChildUp')
                    return 'CUp';
                  else if (states['input_select.occupied_bedrooms'].state == 'AdultUp')
                    return 'Aup';
                  else if (states['input_select.occupied_bedrooms'].state == 'ChildDownPlus')
                    return 'CDown+';
                  else if (states['input_select.occupied_bedrooms'].state == 'ChildUpPlus')
                    return 'CUp+';
                ]]]
  
              state:
                - value: 'Empty'
                  color: var(--paper-item-icon-color)
                
                - operator: default
                  color: var(--state-active-color)
          
            - type: 'custom:button-card'
              template: beacon_button
              entity: sensor.blue_charm_presence
              name: Blue Charm
              icon: mdi:home-map-marker
          
            - type: 'custom:button-card'
              template: person_button
              entity: person.mike
              icon: mdi:human-male
          
            - type: 'custom:button-card'
              template: person_button
              entity: person.maryam
              icon: mdi:human-female
          
            - type: 'custom:button-card'
              template: person_button
              entity: person.sarah
              icon: mdi:human-female
          
            - type: 'custom:button-card'
              template: person_button
              entity: person.david
              icon: mdi:human-male
          
            - type: 'custom:button-card'
              template: person_button
              entity: person.jon
              icon: mdi:human-male
          
            - type: 'custom:button-card'
              template: person_button
              entity: person.skylar
              icon: mdi:human-child
            
            - type: button
              entity: input_boolean.child_alone
